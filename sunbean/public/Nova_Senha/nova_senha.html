<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../css global/estilo.css" />
  <link rel="stylesheet" href="../Nova_Senha/nova_senha.css" />
  <link rel="icon" type="imagem/png" href="../assets/Identidade Visual/favicon.ico" />
  <title>Sunbean | Senha</title>
</head>

<body>
    <!-- Header -->
    <div class="header">
      <div class="container">
        <a href="../index.html"><img src="../assets/Identidade Visual/Logo PNG.png" /></a>
        <ul class="navbar">
          <li><a href="../index.html">Inicio</a></li>
          <li><a href="../Calculadora/Calculadora.html">Simular</a></li>
          <li><a href="../Suporte/suporte.html">Suporte</a></li>
          <li><a href="../Cadastro/cadastro.html">Cadastrar</a></li>
          <li><a href="../Login/login.html"> Entrar</a></li>
        </ul>
      </div>
    </div>

  <!-- Conteúdo -->
  <div class="conteudo">
    <!-- bloco esquerdo -->
    <div class="leftbox">
    </div>

    <!-- bloco direito -->
    <div class="rightbox">
      <div class="container_right">
        <img id="logo_right" src="../assets/Identidade Visual/Logo PNG.png" />
      </div>

      <div class="container_right2">
        <p id='texto_login'>Por favor, digite a <b>Nova senha</b></p>

        <div class="senha">
          <p class="texto_inputs">Confirmar email:</p>
          <input id="input_email" class="input_texto" type="text" placeholder="xxxxxx@xxxxx.com" />
        </div>
        
        <div>
          <p class="texto_inputs">Nova senha:</p>
          <input id="input_senha" class="input_texto" type="password" placeholder="*********"/>
        </div>

        <div class="LembrarUsuario_EsqueceuSenha">
          <span id="span_esqueceuSenha"><a href="../Login/login.html">Lembrou sua senha?</a></span>
        </div>

        <div>
          <button id="btn_entrar" onclick="validSenha()"><b>ENTRAR</b></button>
        </div>

        <div class="div_cadastrar">
          Não possui uma conta ainda? <a href="../Cadastro/cadastro.html" id="a_cadastrar">Faça parte da Sunbean</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="footer">
    <div class="container">
      <div class="left">
        <p>Sunbean SA | CNPJ: 60.746.948.0001-12</p>
        <p>PORTABILIDADE | TRABALHE CONOSCO | SEGURANÇA | INVESTIDORES</p>
      </div>

      <div class="center">
        <p>Cidade De Deus, S/Nº Vila Yara | Osasco | SP | CEP: 06029-900</p>
        <p>
          Copyright © 2020-2022 Sunbean Company S.L. Todos os direitos
          reservados.
        </p>
      </div>

      <div class="right">
        <p>Siga-nos nas redes sociais!</p>
        <div class="icones">
          <a target="_blank" href=""><img src="../assets/Identidade Visual/Twitter.png" /></a>
          <a target="_blank" href="https://www.facebook.com/Sun-Bean-107283795294201"><img src="../assets/Identidade Visual/Facebook.png" /></a>
          <a target="_blank" href="https://instagram.com/sun_bean2022?igshid=YmMyMTA2M2Y="><img src="../assets/Identidade Visual/Instagram.png" /></a>
          <a target="_blank" href=""><img src="../assets/Identidade Visual/Linkedin.png" /></a>
        </div>
      </div>
    </div>
  </div>
</body>

</html>
<script>
  function validSenha() {
    var emailVar = input_email.value;
    var senhaVar = input_senha.value;

  //   if (emailVar == '' || senhaVar == '') {
  // alert('Por favor preencha todos os campos')
  // }else{
    
    fetch("/usuarios/novasenha", {
              method: "POST",
              headers: {
                  "Content-Type": "application/json"
              },
              body: JSON.stringify({
                  // crie um atributo que recebe o valor recuperado aqui
                  // Agora vá para o arquivo routes/usuario.js
                  emailServer: emailVar,
                  senhaServer: senhaVar
                
              })
          }).then(function (resposta) {

              console.log("resposta: ", resposta);

              if (resposta.ok) {
                  //cardErro.style.display = "block";

                  alert("Senha atualizada com sucesso!!");

                  setTimeout(() => {
                      window.location.href = "../Login/login.html";
                  }, "2000")
                  
                  limparFormulario();
                  
              } else {
                  throw ("Houve um erro ao tentar atualizar senha!...");
                  console.log(resposta);
              }
          }).catch(function (resposta) {
              console.log(`#ERRO: ${resposta}`);
            
          });

          return false;
        }
    // }
</script>